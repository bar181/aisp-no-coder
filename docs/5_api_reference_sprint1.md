# API Reference (Sprint 1)

This document describes the API endpoints automatically generated by the AISP PoC Creator in Sprint 1 based on the provided YAML idea sheet and the `api-crud-entity` template.

## Endpoint Structure

For each entity defined in the `features` section of the idea sheet with a "CRUD" prefix (e.g., `CRUD Vehicle`), a single POST endpoint is generated at the path `/{component_id}`. The `component_id` is automatically generated by the `generator/gen.py` script.

Example from `examples/vehicle.yml`:

```yaml
features:
  - CRUD Vehicle
  - CRUD Driver
```

This would result in endpoints with component IDs like `API-CRUD-VEHICLE-XXXX` and `API-CRUD-DRIVER-YYYY`.

## `POST /{component_id}`

This endpoint is generated for each CRUD entity. It currently serves as a stub that echoes the received payload using the `GenericAgent`.

### Purpose

To demonstrate the dynamic routing capability and serve as a placeholder for future CRUD logic implementation.

### Path Parameters

None. The component ID is part of the path itself, determined at runtime by the dynamic router based on the generated specs in Supabase.

### Request Body

The request body should conform to a dynamically created Pydantic model based on the `Input_Data` defined in the component's JSON specification. For Sprint 1 using the `api-crud-entity` template, the expected structure is:

```json
{
  "id": 0,       // Optional integer (Primary key)
  "name": "string" // Required string (Entity name)
}
```

| Name | Type   | Required | Description   |
|------|--------|----------|---------------|
| id   | integer | Optional | Primary key   |
| name | string | Required | Entity name   |

### Response

The current implementation using `GenericAgent` will return a JSON object echoing the received payload within an "echo" key.

Example Response:

```json
{
  "echo": {
    "id": 123,
    "name": "SampleVehicle"
  }
}
```

### Example Usage (using `curl`)

```bash
curl -X POST \
  http://localhost:8000/API-CRUD-VEHICLE-XXXX \
  -H 'Content-Type: application/json' \
  -d '{
    "name": "NewVehicle"
  }'
```

(Note: Replace `API-CRUD-VEHICLE-XXXX` with the actual component ID generated for the Vehicle entity.)

## Future Enhancements

In future sprints, these endpoints will be enhanced to perform actual create, read, update, and delete operations against a data store (e.g., Supabase), and the `GenericAgent` will be replaced with specific logic for each operation. Additional HTTP methods (GET, PUT, DELETE) will also be added to provide full CRUD functionality.